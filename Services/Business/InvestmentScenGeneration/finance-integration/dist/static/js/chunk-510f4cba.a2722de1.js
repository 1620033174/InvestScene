(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-510f4cba"],{"33aa":function(e,t,a){},c0b3:function(e,t,a){"use strict";a("33aa")},c71c:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manage-out-box"},[a("h3",[e._v("因子管理")]),a("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.selectForm}},[a("el-form-item",{attrs:{label:"因子名查询：",prop:"name"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入因子"},on:{blur:e.selectNames},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),a("el-form-item",{attrs:{label:"类别查询：",prop:"type"}},[a("el-select",{attrs:{"prefix-icon":"el-icon-search",filterable:"",placeholder:"请输入类别"},on:{change:e.selectTypes},model:{value:e.selectForm.type,callback:function(t){e.$set(e.selectForm,"type",t)},expression:"selectForm.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{attrs:{value:e.value,label:e.label}})})),1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"90%"},attrs:{data:e.factorData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"默认值"}},[a("span",[e._v(e._s(t.row.defaultValue))])]),a("el-form-item",{attrs:{label:"最大值"}},[a("span",[e._v(e._s(t.row.maxValue))])]),a("el-form-item",{attrs:{label:"最小值"}},[a("span",[e._v(e._s(t.row.minValue))])]),a("el-form-item",{attrs:{label:"精度"}},[a("span",[e._v(e._s(t.row.accuracy))])]),a("el-form-item",{attrs:{label:"描述"}},[a("span",[e._v(e._s(t.row.description))])])],1)]}}])}),a("el-table-column",{attrs:{label:"id",prop:"id",align:"center"}}),a("el-table-column",{attrs:{label:"因子名称",prop:"name",align:"center"}}),a("el-table-column",{attrs:{label:"类别",prop:"type",align:"center"}}),a("el-table-column",{attrs:{label:"公式",prop:"formula",align:"center"}}),a("el-table-column",{attrs:{label:"英文名",prop:"nameUs",align:"center"}}),a("el-table-column",{attrs:{align:"center","min-width":"150"},scopedSlots:e._u([{key:"header",fn:function(){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-plus",plain:""},on:{click:e.addNewFactor}},[e._v("创建因子")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){e.importDialogVisible=!0}}},[e._v("导入")])]},proxy:!0},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return e.clickEdit(t.$index,t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{plain:"",size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),a("el-pagination",{staticClass:"pageList",attrs:{"page-sizes":[5,10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.counts,"current-page":e.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[a("h3",[e._v(e._s(e.dialogTitle))])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{attrs:{id:"dialogFooter"}},[a("el-button",{staticStyle:{width:"15%"},attrs:{type:"success",plain:"",round:""},on:{click:e.handleEdit}},[e._v("确认 ")]),a("el-button",{staticStyle:{width:"15%","margin-left":"20px"},attrs:{type:"danger",plain:"",round:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取消 ")])],1)]},proxy:!0}])},[a("el-form",{ref:"typeFormRef",staticStyle:{width:"60%"},attrs:{"status-icon":"",rules:e.editFactorRule,model:e.chosenFactor}},[a("el-form-item",{attrs:{label:"因子名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请填写名称"},model:{value:e.chosenFactor.name,callback:function(t){e.$set(e.chosenFactor,"name",t)},expression:"chosenFactor.name"}})],1),a("el-form-item",{attrs:{label:"英文名：",prop:"formula"}},[a("el-input",{attrs:{placeholder:"请填写名称"},model:{value:e.chosenFactor.nameUs,callback:function(t){e.$set(e.chosenFactor,"nameUs",t)},expression:"chosenFactor.nameUs"}})],1),a("el-form-item",{attrs:{label:"类型：",prop:"type"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入类别"},model:{value:e.chosenFactor.type,callback:function(t){e.$set(e.chosenFactor,"type",t)},expression:"chosenFactor.type"}},e._l(e.chooseTypeOptions,(function(e){return a("el-option",{attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"公式：",prop:"formula"}},[a("br"),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+="("}}},[e._v("(")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+=")"}}},[e._v(")")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+="+"}}},[e._v("+")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+="-"}}},[e._v("-")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+="*"}}},[e._v("*")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.chosenFactor.formula+="/"}}},[e._v("/")])],1)],1),a("el-input",{attrs:{placeholder:"请填写公式"},model:{value:e.chosenFactor.formula,callback:function(t){e.$set(e.chosenFactor,"formula",t)},expression:"chosenFactor.formula"}})],1),a("el-form-item",{attrs:{label:"默认值：",prop:"defaultValue"}},[a("el-input-number",{attrs:{placeholder:"请填写默认值"},model:{value:e.chosenFactor.defaultValue,callback:function(t){e.$set(e.chosenFactor,"defaultValue",t)},expression:"chosenFactor.defaultValue"}})],1),a("el-form-item",{attrs:{label:"最大值：",prop:"maxValue"}},[a("el-input-number",{attrs:{placeholder:"请填写最大值"},model:{value:e.chosenFactor.maxValue,callback:function(t){e.$set(e.chosenFactor,"maxValue",t)},expression:"chosenFactor.maxValue"}})],1),a("el-form-item",{attrs:{label:"最小值：",prop:"minValue"}},[a("el-input-number",{attrs:{placeholder:"请填写最小值"},model:{value:e.chosenFactor.minValue,callback:function(t){e.$set(e.chosenFactor,"minValue",t)},expression:"chosenFactor.minValue"}})],1),a("el-form-item",{attrs:{label:"精度：",prop:"accuracy"}},[a("el-input-number",{attrs:{placeholder:"请填写精度"},model:{value:e.chosenFactor.accuracy,callback:function(t){e.$set(e.chosenFactor,"accuracy",t)},expression:"chosenFactor.accuracy"}})],1),a("el-form-item",{attrs:{label:"描述：",prop:"description"}},[a("el-input",{attrs:{placeholder:"请填写描述",type:"textarea"},model:{value:e.chosenFactor.description,callback:function(t){e.$set(e.chosenFactor,"description",t)},expression:"chosenFactor.description"}})],1)],1)],1),a("el-dialog",{attrs:{title:"批量导入",visible:e.importDialogVisible,center:"","destroy-on-close":""},on:{"update:visible":function(t){e.importDialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("div",{attrs:{id:"dialogFooter"}},[a("el-button",{staticStyle:{width:"15%"},attrs:{type:"primary",plain:""},on:{click:e.handleImport}},[e._v("确认 ")]),a("el-button",{staticStyle:{width:"15%","margin-left":"20px"},attrs:{type:"danger",plain:""},on:{click:function(t){e.importDialogVisible=!1}}},[e._v(" 取消 ")])],1)]},proxy:!0}])},[a("el-link",{staticStyle:{"margin-bottom":"2.5rem"},attrs:{href:"http://localhost:8080/demo.xlsx",target:"_blank",type:"success"}},[e._v("下载模板")]),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/api/hz/factor/import",limit:1,"before-upload":e.beforeUpload,"on-change":e.handleChange,"on-exceed":e.handleExceed,"file-list":e.fileList,data:{name:""},"auto-upload":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls.xlsx文件")])],1)],1)],1)},n=[],r=a("c7eb"),o=a("1da1"),i=(a("99af"),a("b0c0"),a("f858")),s={data:function(){return{factorData:[{id:"1",name:"hhh",type:"hhh",formula:"hhh",defaultValue:0,maxValue:0,minValue:0,accuracy:1,description:"h",nameUs:"h"}],typeOptions:[{value:"质量类因子",label:"质量类因子"},{value:"",label:"全部"},{value:"市值因子",label:"市值因子"},{value:"基础因子",label:"基础因子"},{value:"情绪因子",label:"情绪因子"},{value:"每股因子",label:"每股因子"},{value:"财务指标因子",label:"财务指标因子"},{value:"资产因子",label:"资产因子"}],chooseTypeOptions:[{value:"质量类因子",label:"质量类因子"},{value:"市值因子",label:"市值因子"},{value:"基础因子",label:"基础因子"},{value:"情绪因子",label:"情绪因子"},{value:"每股因子",label:"每股因子"},{value:"财务指标因子",label:"财务指标因子"},{value:"资产因子",label:"资产因子"}],tableLoading:!1,page:1,pageSize:10,counts:0,dialogVisible:!1,importDialogVisible:!1,dialogTitle:"增加因子",isEdit:!1,editFactorRule:{name:[{required:!0,message:"请输入因子名称",trigger:"blur"}],type:[{required:!0,message:"请选择因子类别",trigger:"blur"}],formula:[{required:!0,message:"请输入因子公式",trigger:"blur"}],defaultValue:[{required:!0,message:"请输入因子默认值",trigger:"blur"}],maxValue:[{required:!0,message:"请输入因子最大值",trigger:"blur"}],minValue:[{required:!0,message:"请输入因子最小值",trigger:"blur"}],accuracy:[{required:!0,message:"请输入因子精度",trigger:"blur"}],description:[{required:!0,message:"请输入因子描述",trigger:"blur"}]},fileList:[],fileListTemp:[],chosenFactor:{name:"",type:"",formula:"",defaultValue:0,maxValue:0,minValue:0,accuracy:0,description:"",nameUs:""},selectForm:{name:"",type:"",formula:"",defaultValue:0,maxValue:0,minValue:0,accuracy:0,description:"",nameUs:""}}},methods:{handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeUpload:function(e){var t="application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传文件只能是 xls/xlsx 格式!"),a||this.$message.error("上传文件大小不能超过 2MB!"),t&&a},handleChange:function(e,t){this.fileListTemp=t},handleImport:function(){0!==this.fileListTemp.length?(this.$refs.upload.submit(),this.$message({type:"success",message:"导入成功"}),this.importDialogVisible=!1):this.$message.error("请先选择文件")},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该因子, 是否继续?","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(Object(o["a"])(Object(r["a"])().mark((function e(){var l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["b"])(t.id);case 2:if(l=e.sent,2e4!==(null===l||void 0===l?void 0:l.data.code)){e.next=9;break}return a.$message({type:"success",message:"删除成功"}),e.next=7,a.initData();case 7:e.next=10;break;case 9:a.$message.error(l.data.msg);case 10:case"end":return e.stop()}}),e)})))).catch((function(){a.$message({type:"info",message:"取消删除"})}))},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.initData()},handleCurrentChange:function(e){this.page=e,this.initData()},selectNames:function(){this.page=1,this.initData()},selectTypes:function(){this.page=1,this.initData()},addNewFactor:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dialogVisible=!0,e.isEdit=!1,e.dialogTitle="增加因子",e.chosenFactor={name:"",type:"",formula:"",defaultValue:0,maxValue:0,minValue:0,accuracy:0,description:"",nameUs:""};case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isEdit){t.next=14;break}return t.next=3,Object(i["k"])(e.chosenFactor);case 3:if(a=t.sent,2e4!==(null===a||void 0===a?void 0:a.data.code)){t.next=11;break}return e.$message({type:"success",message:"修改成功"}),e.dialogVisible=!1,t.next=9,e.initData();case 9:t.next=12;break;case 11:e.$message.error(a.data.msg);case 12:t.next=25;break;case 14:return t.next=16,Object(i["a"])(e.chosenFactor);case 16:if(l=t.sent,2e4!==(null===l||void 0===l?void 0:l.data.code)){t.next=24;break}return e.$message({type:"success",message:"添加成功"}),e.dialogVisible=!1,t.next=22,e.initData();case 22:t.next=25;break;case 24:e.$message.error(l.data.msg);case 25:case"end":return t.stop()}}),t)})))()},clickEdit:function(e,t){this.chosenFactor=t,this.isEdit=!0,this.dialogVisible=!0,this.dialogTitle="修改因子"},initData:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,Object(i["e"])({page:e.page,pageSize:e.pageSize,name:e.selectForm.name,type:e.selectForm.type});case 3:a=t.sent,2e4===(null===a||void 0===a?void 0:a.data.code)?(e.factorData=a.data.data.records,e.counts=a.data.data.total):e.$message.error("获取数据失败"),e.tableLoading=!1;case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.initData()}},c=s,u=(a("c0b3"),a("2877")),p=Object(u["a"])(c,l,n,!1,null,"7b6a4b07",null);t["default"]=p.exports},f858:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return i})),a.d(t,"h",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"i",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"k",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return f}));var l=a("b775");function n(e){return Object(l["a"])({url:"/hz/results/getFactorsInfo",method:"get",params:e})}function r(e){return Object(l["a"])({url:"/hz/results/getFactorsData",method:"get",params:e})}function o(e){return Object(l["a"])({url:"/hz/detail/getMin",method:"get",params:e})}function i(e){return Object(l["a"])({url:"/hz/detail/getMax",method:"get",params:e})}function s(e){return Object(l["a"])({url:"/hz/detail/getVariancePic",method:"get",params:e})}function c(e){return Object(l["a"])({url:"/hz/detail/getQuantilePic",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/hz/results/getCorrelationFactors",method:"get",params:e})}function p(e){return Object(l["a"])({url:"/hz/factor/update",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/hz/factor/deleteById/"+e,method:"delete"})}function d(e){return Object(l["a"])({url:"/hz/factor/add",method:"post",data:e})}function f(e){return Object(l["a"])({url:"/hz/factor/getByPage",method:"get",params:e})}}}]);